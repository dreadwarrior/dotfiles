#!/bin/sh
#
# -*- Mode: sh; coding: utf-8; indent-tabs-mode: nil; tab-width: 2 -*-
# vim:set expandtab tabstop=2 fenc=utf-8 fileformat=unix filetype=sh:
#
# Wrapper for docker `php7.0-cli`
#
# @see http://stackoverflow.com/questions/33510895/running-phpunit-within-a-docker-container-with-phpstorm

system_type=$(uname -s)

if [ "$system_type" != "Darwin" ]; then
  DIR=$(dirname $(readlink -f "$0"))
else
  DIR=$(dirname $(darwin_readlink "$0"))
fi

docker run --rm -ti --sig-proxy=true \
  -v ${DIR}:${DIR} \
  -v /tmp/:/tmp/ \
  -w ${DIR} \
  --pid=host \
  php:7.0-cli \
  php "$@"
